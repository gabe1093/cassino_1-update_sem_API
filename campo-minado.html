<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ðŸ’£ Campo Minado</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Poppins", sans-serif;
      background:#006400;
      color: #fff;
      text-align: center;
    }

    h1 { margin-top: 20px; font-size: 28px; }

    .back-btn {
      background: #ff9800;
      padding: 10px 18px;
      border-radius: 8px;
      border: none;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 15px;
      transition: 0.3s;
    }

    .back-btn:hover { background: #ffb74d; transform: scale(1.05); }

    .game-container {
      background: rgba(255, 255, 255, 0.08);
      padding: 25px;
      border-radius: 15px;
      max-width: 420px;
      margin: 30px auto;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
    }

    #saldo {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #00e676;
    }

    input, button {
      padding: 12px;
      font-size: 16px;
      margin: 10px 0;
      border-radius: 8px;
      border: none;
      outline: none;
      transition: 0.3s;
    }

    input { width: 80%; text-align: center; }
    button { cursor: pointer; color: white; font-weight: bold; }

    #start { background: #ff9800; }
    #start:hover { background: #ffb74d; transform: scale(1.05); }

    #stopBtn { background: #00c853; display: none; }
    #stopBtn:hover { background: #00e676; transform: scale(1.05); }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      grid-gap: 10px;
      justify-content: center;
      margin-top: 15px;
    }

    .cell {
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
    }

    .cell:hover { transform: scale(1.05); }
    .safe { background: #00c853 !important; }
    .bomb { background: #ff1744 !important; }

    #status {
      margin-top: 15px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>ðŸ’£ Campo Minado</h1>
  <div class="game-container">
    <div id="saldo">ðŸ’° Saldo: R$ 0.00</div>
    <input type="number" id="betAmount" placeholder="Valor da aposta (R$)" />
    <br />
    <button id="start">Iniciar Jogo</button>
    <button id="stopBtn">ðŸ›‘ Parar e Sacar</button>

    <div class="grid" id="grid"></div>

    <div id="status"></div>
    <button class="back-btn" onclick="voltar()">â¬… Voltar</button>
  </div>

  <script>
    const saldoEl = document.getElementById("saldo");
    const betInput = document.getElementById("betAmount");
    const startBtn = document.getElementById("start");
    const stopBtn = document.getElementById("stopBtn");
    const gridEl = document.getElementById("grid");
    const statusEl = document.getElementById("status");

    let saldo = parseFloat(localStorage.getItem("saldo")) || 50.00;
    let betAmount = 0;
    let bombs = [];
    let revealed = 0;
    let playing = false;

    function atualizarSaldo() {
      localStorage.setItem("saldo", saldo);
      saldoEl.textContent = `ðŸ’° Saldo: R$ ${saldo.toFixed(2)}`;
    }

    function iniciarJogo() {
      betAmount = parseFloat(betInput.value);

      if (isNaN(betAmount) || betAmount <= 0) {
        alert("Digite um valor vÃ¡lido para apostar.");
        return;
      }

      if (betAmount > saldo) {
        alert("Saldo insuficiente!");
        return;
      }

      saldo -= betAmount;
      atualizarSaldo();
      statusEl.textContent = "ðŸ˜Ž Encontre todas as casas seguras!";
      startBtn.disabled = true;
      stopBtn.style.display = "inline-block";
      playing = true;
      revealed = 0;
      bombs = [];
      gridEl.innerHTML = "";

      // Sorteia 5 bombas
      while (bombs.length < 5) {
        const random = Math.floor(Math.random() * 25);
        if (!bombs.includes(random)) bombs.push(random);
      }

      // Cria as cÃ©lulas
      for (let i = 0; i < 25; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.dataset.index = i;
        cell.addEventListener("click", revelarCelula);
        gridEl.appendChild(cell);
      }
    }

    function revelarCelula(e) {
      if (!playing) return;
      const cell = e.target;
      const index = parseInt(cell.dataset.index);

      if (bombs.includes(index)) {
        cell.textContent = "ðŸ’£";
        cell.classList.add("bomb");
        statusEl.textContent = `ðŸ’¥ BOOM! VocÃª perdeu R$ ${betAmount.toFixed(2)} ðŸ˜¢`;
        fimDeJogo(false);
      } else {
        cell.textContent = "âœ…";
        cell.classList.add("safe");
        cell.removeEventListener("click", revelarCelula);
        revealed++;

        if (revealed === 20) {
          const ganho = betAmount * 3;
          saldo += ganho;
          statusEl.textContent = `ðŸŽ‰ ParabÃ©ns! VocÃª ganhou R$ ${ganho.toFixed(2)} ðŸ¤‘`;
          fimDeJogo(true);
        }
      }
    }

    function pararEReceber() {
      if (!playing) return;
      const ganho = (betAmount * (1 + (revealed * 0.2))).toFixed(2);
      saldo += parseFloat(ganho);
      statusEl.textContent = `ðŸ›‘ VocÃª parou o jogo e sacou R$ ${ganho}`;
      fimDeJogo(true);
    }

    function fimDeJogo(ganhou) {
      playing = false;
      startBtn.disabled = false;
      stopBtn.style.display = "none";

      // Revela todas as bombas
      const cells = document.querySelectorAll(".cell");
      cells.forEach((cell, i) => {
        if (bombs.includes(i)) {
          cell.textContent = "ðŸ’£";
          cell.classList.add("bomb");
        }
        cell.removeEventListener("click", revelarCelula);
      });

      atualizarSaldo();
    }

    function voltar() {
      window.location.href = "index.html";
    }

    startBtn.addEventListener("click", iniciarJogo);
    stopBtn.addEventListener("click", pararEReceber);
    atualizarSaldo();
  </script>
</body>
</html>